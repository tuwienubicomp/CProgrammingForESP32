<p><h2 data-heading="The Device">The Device</h2>Here you can find the <a data-tooltip-position="top" aria-label="https://shop.m5stack.com/products/m5stickc-plus-esp32-pico-mini-iot-development-kit?variant=43983456764161#:~:text=IoT%20development%20kit-,Specification,-Resources" rel="noopener" class="external-link" href="https://shop.m5stack.com/products/m5stickc-plus-esp32-pico-mini-iot-development-kit?variant=43983456764161#:~:text=IoT%20development%20kit-,Specification,-Resources" target="_blank">specifications</a> of the M5Stick CPlus, along with all the sensors it contains. The backside of the device shows that the base chip is the ESP32 Pico. More details on the other parts later.<br><div src="attachment/Pasted image 20240311162438.png" class="internal-embed"></div><br><h2 data-heading="Install Visual Studio Code &amp; Extension">Install Visual Studio Code &amp; Extension</h2>We will be using Visual Studio Code as the main IDE for this work. <a data-tooltip-position="top" aria-label="https://github.com/espressif/vscode-esp-idf-extension/blob/master/docs/tutorial/install.md" rel="noopener" class="external-link" href="https://github.com/espressif/vscode-esp-idf-extension/blob/master/docs/tutorial/install.md" target="_blank">Start here</a> and follow along the detailed steps on installation.Make sure to <a data-tooltip-position="top" aria-label="https://marketplace.visualstudio.com/items?itemName=espressif.esp-idf-extension" rel="noopener" class="external-link" href="https://marketplace.visualstudio.com/items?itemName=espressif.esp-idf-extension" target="_blank">install the ESP-IDF VS Code extension</a>. This is our main method of interaction with the device.<h3 data-heading="Configure the Extension">Configure the Extension</h3><div src="attachment/Drawing 2024-03-13 11.21.19.excalidraw.png" class="internal-embed"></div><br><div src="attachment/Drawing 2024-03-13 11.25.42.excalidraw.png" class="internal-embed"></div><br><h2 data-heading="Check the Command Palette for the New ESP-IDF Commands">Check the Command Palette for the New ESP-IDF Commands</h2><div src="attachment/Pasted image 20240312160232.png" class="internal-embed"></div><br><div src="attachment/Drawing 2024-03-13 11.31.10.excalidraw.png" class="internal-embed"></div><br><h2 data-heading="Launch Simple Example #1 (hello world)">Launch Simple Example #1 (hello world)</h2><div src="attachment/Drawing 2024-03-13 11.50.15.excalidraw.png" class="internal-embed"></div><br><div src="attachment/Pasted image 20240313115520.png" class="internal-embed"></div><br><div src="attachment/Drawing 2024-03-13 11.56.18.excalidraw.png" class="internal-embed"></div><br><div src="attachment/Pasted image 20240313115853.png" class="internal-embed"></div><br><ol>
<li>Set the device target to ESP32 chip (USB bridge)</li>
<li>Set the COM port (you will find it in your device manager, see below)</li>
<li>Set the flash baud rate to 115200</li>
<li>Look at the code under /main/hello_world_main.c</li>
<li>Build the code (remember the shortcut). This takes a while the first time.</li>
<li>If you see this on the terminal output, all good!<br>
<div src="attachment/Pasted image 20240313121550.png" class="internal-embed"></div></li>
<li>Flash the program on your device, pick UART as the method.</li>
<li>Success<br>
<div src="attachment/Pasted image 20240313121748.png" class="internal-embed"></div></li>
</ol><h3 data-heading="Which COM Port?">Which COM Port?</h3><ul>
<li>In Windows, right click your "This PC" icon and go to the Device Manager.</li>
<li>You should be able to see this when you connect the device via USB cable.</li>
<li>It should disappear when you disconnect it.</li>
</ul><div src="attachment/Pasted image 20240313120326.png" class="internal-embed"></div><br>If this is not the case, consider downloading and <a data-tooltip-position="top" aria-label="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/establish-serial-connection.html" rel="noopener" class="external-link" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/establish-serial-connection.html" target="_blank">installing the COM port driver</a>.<h2 data-heading="Launch Simple Example #2 (blink a LED)">Launch Simple Example #2 (blink a LED)</h2><div src="attachment/Pasted image 20240311155254.png" class="internal-embed"></div><br><div src="attachment/Pasted image 20240313122912.png" class="internal-embed"></div><br>We can edit the configuration of this project, which holds some of the values used by the <a href="#define" class="tag" target="_blank" rel="noopener">#define</a> compiler directives<ul>
<li>
<p>Run command (ctrl + shift + p) "Configure project SDKConfig for coverage"</p>
</li>
<li>
<p>Scroll down until you see this<br>
</p><div src="attachment/Pasted image 20240313123201.png" class="internal-embed"></div><p></p>
</li>
<li>
<p>We need to flash the on-board red LED. Which Pin is it?</p>
<ul>
<li>It's general-purpose input/output (GPIO) Pin 10</li>
</ul>
</li>
</ul><div src="attachment/Pasted image 20240313122614.png" class="internal-embed"></div><br><ul>
<li>change the Blink GPIO number to 10, then save</li>
<li>Build, flash, run as before</li>
<li>If all works well, you should see a red LED blinking on your device.</li>
</ul></p>